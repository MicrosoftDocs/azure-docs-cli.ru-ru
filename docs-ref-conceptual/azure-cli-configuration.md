---
title: Варианты настройки Azure CLI
description: Как настроить Azure CLI
keywords: Azure CLI, configuration, settings, Azure
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 06/11/2018
ms.topic: conceptual
ms.prod: azure
ms.technology: azure-cli
ms.devlang: azurecli
ms.openlocfilehash: 792a4bde1876bda620d31bccb7abcfc8e880332f
ms.sourcegitcommit: 503cf343422ab8d2a587d2ccb795953b8ad66376
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/31/2019
ms.locfileid: "75560000"
---
# <a name="azure-cli-configuration"></a>Настройка Azure CLI

С помощью Azure CLI пользователи могут настраивать различные параметры, например для ведения журналов и сбора данных, а также значения аргументов по умолчанию.
Интерфейс командной строки содержит удобную команду для управления некоторыми значениями по умолчанию — `az configure`. Другие значения можно указать в файле конфигурации или с помощью переменных среды.

Значения конфигурации, используемые CLI, вычисляются в указанном ниже порядке. Элементы, расположенные выше в списке, имеют больший приоритет.

1. Параметры командной строки
2. Переменные среды
3. Значения, содержащиеся в файле конфигурации или заданные с помощью команды `az configure`.

## <a name="cli-configuration-with-az-configure"></a>Настройка CLI с использованием команды az configure

Задать значения по умолчанию для CLI можно с помощью команды [az configure](/cli/azure/reference-index#az-configure).
Эта команда принимает один аргумент `--defaults`, который является разделенным пробелами списком пар `key=value`. Предоставленные значения используются в CLI вместо обязательных аргументов.

Следующая таблица содержит список доступных ключей конфигурации.

| Имя | Description |
|------|-------------|
| group | Группа ресурсов по умолчанию для всех команд. |
| location | Расположение по умолчанию для всех команд. |
| web | Имя приложения по умолчанию для команд `az webapp`. |
| vm | Имя виртуальной машины по умолчанию для команд `az vm`. |
| vmss | Имя масштабируемого набора виртуальных машин (VMSS) по умолчанию, используемое в командах `az vmss`. |
| acr | Имя реестра контейнеров по умолчанию для `az acr` команд. |

Вот пример того, как можно задать группу ресурсов и расположение по умолчанию для всех команд:

```azurecli-interactive
az configure --defaults location=westus2 group=MyResourceGroup
```

## <a name="cli-configuration-file"></a>Файл конфигурации CLI

Файл конфигурации CLI содержит другие параметры, которые используются для управления поведением CLI. Файл конфигурации расположен здесь: `$AZURE_CONFIG_DIR/config`. По умолчанию для `AZURE_CONFIG_DIR` устанавливается значение `$HOME/.azure` в Linux и macOS и `%USERPROFILE%\.azure` в Windows.

Файлы конфигурации записываются в формате INI. Формат файла определяется заголовками разделов, за которыми следует список пар "ключ-значение".

* Заголовки разделов указываются следующим образом: `[section-name]`. В именах разделов учитывается регистр.
* Параметры записываются следующим образом: `key=value`. В именах ключей регистр не учитывается.
* Комментарии — это любая строка, начинающаяся с `#` или `;`. Встроенные комментарии не допускаются.

Логические операторы не зависят от регистра и представлены следующими значениями:

* __True__. 1, yes, true, on.
* __False__. 0, no, false, off.

Ниже приведен пример файла конфигурации CLI, который отключает все запросы на подтверждение и настраивает для ведения журнала папку `/var/log/azure`.

```ini
[core]
disable_confirm_prompt=Yes

[logging]
enable_log_file=yes
log_dir=/var/log/azure
```

Сведения обо всех доступных значениях параметров конфигурации и их описание см. в следующем разделе. Дополнительные сведения о формате INI см. в [документации Python по файлам INI](https://docs.python.org/3/library/configparser.html#supported-ini-file-structure).

## <a name="cli-configuration-values-and-environment-variables"></a>Переменные среды и значения конфигурации CLI

Следующая таблица содержит все разделы и имена параметров, которые могут быть включены в файл конфигурации. Соответствующие переменные среды имеют формат `AZURE_{section}_{name}` и записываются прописными. Например параметр по умолчанию `storage_account` для `batchai` указывается в виде переменной `AZURE_BATCHAI_STORAGE_ACCOUNT`.

Если указать значение по умолчанию, любая команда больше не будет требовать этот аргумент. Вместо этого используется значение по умолчанию.

| Section | Имя      | Тип | Description|
|---------|-----------|------|------------|
| __core__ | output | строка | Формат вывода по умолчанию. Может иметь значение `json`, `jsonc`, `tsv` или `table`. |
| | disable\_confirm\_prompt | Логическое | Включает и отключает запросы на подтверждение. |
| | collect\_telemetry | Логическое | Разрешает корпорации Майкрософт собирать анонимные данные об использовании CLI. Сведения о конфиденциальности см. в описании [условий использования Azure CLI](http://aka.ms/AzureCliLegal). |
| __logging__ | enable\_log\_file | Логическое | Включение и отключение ведения журнала. |
| | log\_dir | строка | Каталог для записи журналов. По умолчанию это значение равно `${AZURE_CONFIG_DIR}/logs`. |
| __storage__ | connection\_string | строка | Строка подключения по умолчанию для команд `az storage`. |
| | account | строка | Имя учетной записи по умолчанию для команд `az storage`. |
| | ключ | строка | Ключ учетной записи по умолчанию для команд `az storage`. |
| | sas\_token | строка | Токен SAS по умолчанию для команд `az storage`. |
| __batchai__ | storage\_account | строка | Учетная запись хранения по умолчанию для команд `az batchai`. |
| | storage\_key | строка | Ключ к хранилищу данных по умолчанию для команд `az batchai`. |
| __batch__ | account | строка | Учетная запись пакетной службы по умолчанию для команд `az batch`. |
| | access\_key | строка | Ключ доступа по умолчанию для команд `az batch`. Используется только с авторизацией `aad`. |
| | endpoint | строка | Конечная точка по умолчанию для подключения для команд `az batch`. |
| | auth\_mode | строка | Режим авторизации для команд `az batch`. Может иметь значение `shared_key` или `aad`. |
| __cloud__ | name | строка | Облако по умолчанию для всех команд `az`.  Допустимые значения — `AzureCloud` (по умолчанию), `AzureChinaCloud`, `AzureUSGovernment` и `AzureGermanCloud`. Чтобы изменить облака, можно использовать команду `az cloud set –name`.  Пример см. в статье [Выбор облаков с помощью Azure CLI](manage-clouds-azure-cli.md). |

> [!NOTE]
> В файле конфигурации могут быть и другие значения, но управление ими осуществляется непосредственно с помощью команд CLI, включая `az configure`. Самостоятельно изменить можно только значения, перечисленные в таблице выше.
