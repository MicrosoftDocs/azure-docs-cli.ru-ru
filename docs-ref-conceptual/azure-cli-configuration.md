---
title: Варианты настройки Azure CLI
description: Как настроить Azure CLI
author: dbradish-microsoft
ms.author: dbradish
manager: barbkess
ms.date: 09/30/2020
ms.topic: conceptual
ms.service: azure-cli
ms.devlang: azurecli
ms.custom: devx-track-azurecli
ms.openlocfilehash: c2197028048799f70f92d0f40525f7c4b17baa62
ms.sourcegitcommit: 8d514f4147d6edfc02d8d95d5a4243d100a7fcc9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/06/2020
ms.locfileid: "93413282"
---
# <a name="azure-cli-configuration"></a>Настройка Azure CLI

С помощью Azure CLI пользователи могут настраивать различные параметры, например для ведения журналов и сбора данных, а также значения аргументов по умолчанию.
Интерфейс командной строки содержит удобную команду для управления некоторыми значениями по умолчанию — **az configure**. Другие значения можно указать в файле конфигурации или с помощью переменных среды.

Значения конфигурации, используемые CLI, вычисляются в указанном ниже порядке. Элементы, расположенные выше в списке, имеют больший приоритет.

1. Параметры командной строки
1. Хранимые значения параметра установлены с помощью команды **az config param-persist**
1. Переменные среды
1. Значения в файле конфигурации, заданные с помощью команды **az config**

## <a name="cli-configuration-with-az-configure"></a>Настройка CLI с использованием команды az configure

Задать значения по умолчанию для CLI можно с помощью команды [az configure](/cli/azure/reference-index#az-configure).
Эта команда принимает один аргумент **--defaults** , который является разделенным пробелами списком пар `key=value`. Предоставленные значения используются в CLI вместо обязательных аргументов.

Следующая таблица содержит список доступных ключей конфигурации.

| Имя | Описание |
|------|-------------|
| group | Группа ресурсов по умолчанию для всех команд. |
| location | Расположение по умолчанию для всех команд. |
| web | Имя приложения по умолчанию для команд **az webapp**. |
| vm | Имя виртуальной машины по умолчанию для команд **az vm**. |
| vmss | Имя масштабируемого набора виртуальных машин (VMSS) по умолчанию, используемое в командах **az vmss**. |
| acr | Имя реестра контейнеров по умолчанию для **az acr** команд. |

Вот пример того, как можно задать группу ресурсов и расположение по умолчанию для всех команд:

`azurecli-interactive
az configure --defaults location=westus2 group=MyResourceGroup
`

## <a name="cli-configuration-file"></a>Файл конфигурации CLI

Файл конфигурации CLI содержит другие параметры, которые используются для управления поведением CLI. Файл конфигурации расположен здесь: _$AZURE_CONFIG_DIR/config_. По умолчанию для **AZURE_CONFIG_DIR** устанавливается значение `$HOME/.azure` в Linux и macOS и `%USERPROFILE%\.azure` в Windows.

Файлы конфигурации записываются в формате INI. Формат файла определяется заголовками разделов, за которыми следует список пар "ключ-значение".

* Заголовки разделов указываются следующим образом: `[section-name]`. В именах разделов учитывается регистр.
* Параметры записываются следующим образом: `key=value`. В именах ключей регистр не учитывается.
* Комментарии — это любая строка, начинающаяся с `#` или `;`. Встроенные комментарии не допускаются.

Логические операторы не зависят от регистра и представлены следующими значениями:

* __True__. 1, yes, true, on.
* __False__. 0, no, false, off.

Ниже приведен пример файла конфигурации CLI, который отключает все запросы на подтверждение и настраивает для ведения журнала папку `/var/log/azure`.

`ini [core] disable_confirm_prompt=Yes

[logging] enable_log_file=yes log_dir=/var/log/azure `

Сведения обо всех доступных значениях параметров конфигурации и их описание см. в следующем разделе. Дополнительные сведения о формате INI см. в [документации Python по файлам INI](https://docs.python.org/3/library/configparser.html#supported-ini-file-structure).

## <a name="cli-configuration-values-and-environment-variables"></a>Переменные среды и значения конфигурации CLI

Следующая таблица содержит все разделы и имена параметров, которые могут быть включены в файл конфигурации. Соответствующие переменные среды имеют формат **AZURE_{section}_{name}** и записываются прописными. Например, по умолчанию в переменной **AZURE_CORE_OUTPUT** для `core` задается значение `output`, в переменной **AZURE_BATCHAI_STORAGE_ACCOUNT** для `batchai` — значение `storage_account`, а в переменной **AZURE_DEFAULTS_LOCATION**  — значение `location`.

Если указать значение по умолчанию, любая команда больше не будет требовать этот аргумент. Вместо этого используется значение по умолчанию.

| Section | Имя      | Тип | Описание|
|---------|-----------|------|------------|
| __core__ | output | строка | Формат вывода по умолчанию. Один из следующих: **json** , **jsonc** , **tsv** или **table**. |
| | disable\_confirm\_prompt | Логическое | Включает и отключает запросы на подтверждение. |
| | collect\_telemetry | Логическое | Разрешает корпорации Майкрософт собирать анонимные данные об использовании CLI. Сведения о конфиденциальности см. в [лицензии MIT для Azure CLI](https://github.com/Azure/azure-cli/blob/dev/LICENSE). |
| | only\_show\_errors | Логическое | Показывает ошибки только при вызове команды. Иными словами, в **stderr** будут записываться только ошибки. При этом подавляются предупреждения от команд предварительной версии, а также нерекомендуемых и экспериментальных команд. Также предоставляется для отдельных команд с параметром **--only-show-errors**. |
| | no\_color | Логическое | Отключает цвет. Сообщения, выделенные цветом, будут иметь префикс `DEBUG`, `INFO`, `WARNING` и `ERROR`. Так устраняется проблема со сторонней библиотекой, при использовании которой цвет терминала нельзя отменить после перенаправления **stdout**. |
| __logging__ | enable\_log\_file | Логическое | Включение и отключение ведения журнала. |
| | log\_dir | строка | Каталог для записи журналов. По умолчанию это значение равно `${AZURE_CONFIG_DIR}/logs*`. |
| __defaults__ | group | строка | Группа ресурсов по умолчанию для всех команд. |
| | location | строка | Расположение по умолчанию для всех команд. |
| | web | строка | Имя приложения по умолчанию для команд **az webapp**. |
| | vm | строка | Имя виртуальной машины по умолчанию для команд **az vm**. |
| | vmss | строка | Имя масштабируемого набора виртуальных машин (VMSS) по умолчанию, используемое в командах **az vmss**. |
| | acr | строка | Имя реестра контейнеров по умолчанию для **az acr** команд. |
| __storage__ | connection\_string | строка | Строка подключения по умолчанию для команд **az storage**. |
| | account | строка | Имя учетной записи по умолчанию для команд **az storage**. |
| | ключ | строка | Ключ учетной записи по умолчанию для команд **az storage**. |
| | sas\_token | строка | Маркер SAS по умолчанию для команд **az storage**. |
| __batchai__ | storage\_account | строка | Учетная запись хранения по умолчанию для команд **az batchai**. |
| | storage\_key | строка | Ключ к хранилищу данных по умолчанию для команд **az batchai**. |
| __batch__ | account | строка | Имя учетной записи пакетной службы Azure по умолчанию для команд **az batch**. |
| | access\_key | строка | Ключ доступа по умолчанию для команд **az batch**. Используется только с авторизацией `aad`. |
| | endpoint | строка | Конечная точка по умолчанию для подключения для команд **az batch**. |
| | auth\_mode | строка | Режим авторизации для команд **az batch**. Может иметь значение `shared_key` или `aad`. |
| __cloud__ | name | строка | Облако по умолчанию для всех команд **az**.  Допустимые значения — `AzureCloud` (по умолчанию), `AzureChinaCloud`, `AzureUSGovernment` и `AzureGermanCloud`. Чтобы изменить облака, можно использовать команду **az cloud set –name**.  Пример см. в статье [Выбор облаков с помощью Azure CLI](manage-clouds-azure-cli.md). |
| __extension__ | use_dynamic_install | строка | Установите расширение, если оно не было добавлено при выполнении команды. Допустимые значения — `no` (по умолчанию), `yes_prompt`, `yes_without_prompt`. |
| | run_after_dynamic_install | Логическое | Продолжайте выполнять команду при динамической установке расширения. Значение по умолчанию — `False`. |

> [!NOTE]
> В файле конфигурации могут быть и другие значения, но управление ими осуществляется непосредственно с помощью команд CLI, включая **az configure**. Самостоятельно изменить можно только значения, перечисленные в таблице выше.

## <a name="see-also"></a>См. также раздел

- [Работа с параметром persist в Azure CLI](param-persist-howto.md)
- [Учебник. Использование параметра persist для последовательного выполнения команд Azure CLI](param-persist-tutorial.md)
